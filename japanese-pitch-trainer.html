<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Pitch Accent Trainer</title>
    <link rel="stylesheet" href="japanese-styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üáØüáµ Japanese Pitch Accent Trainer</h1>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="question-counter">
                <span id="currentQuestion">1</span> / <span id="totalQuestions">3</span>
            </div>
        </header>

        <!-- Main Training Area -->
        <main class="training-container">
            <!-- Question Display -->
            <div class="question-area">
                <div class="lesson-type" id="lessonType">Pitch Accent Training</div>
                <div class="japanese-phrase" id="japanesePhrase">„ÅØ„Åó</div>
                <div class="pitch-pattern" id="pitchPattern">
                    <div class="pitch-visualization">
                        <div class="pitch-bar high" id="pitch1">H</div>
                        <div class="pitch-bar low" id="pitch2">L</div>
                    </div>
                </div>
                <div class="meaning" id="meaning">Ê©ã (bridge)</div>
                <div class="example-sentence" id="exampleSentence">Ê©ã„ÇíÊ∏°„Çã„ÄÇÔºà„ÅØ„Åó[HL] „Çí „Çè„Åü„ÇãÔºâ‚Äî "cross the bridge."</div>
                <div class="instructions" id="instructions">
                    Listen to the correct pronunciation, then record yourself saying the phrase with the correct pitch pattern.
                </div>
            </div>

            <!-- Audio Controls -->
            <div class="audio-area">
                <div class="audio-controls">
                    <button id="playCorrectBtn" class="audio-btn correct-btn">
                        <span class="audio-icon">üîä</span>
                        <span class="audio-text">Play Correct Pronunciation</span>
                    </button>
                    <button id="recordBtn" class="record-btn">
                        <span class="record-icon">üé§</span>
                        <span class="record-text">Record Your Pronunciation</span>
                    </button>
                </div>
                
                <div class="recording-status" id="recordingStatus"></div>
                
                <div class="audio-playback" id="audioPlayback" style="display: none;">
                    <audio controls id="audioPlayer"></audio>
                    <button id="playYourBtn" class="play-btn">Play Your Recording</button>
                </div>
            </div>

            <!-- Feedback Area -->
            <div class="feedback-area" id="feedbackArea" style="display: none;">
                <h3>Your Performance</h3>
                <div class="score-display">
                    <div class="score-item">
                        <span class="score-label">Pitch Accuracy:</span>
                        <span class="score-value" id="pitchScore">85%</span>
                    </div>
                    <div class="score-item">
                        <span class="score-label">Pronunciation:</span>
                        <span class="score-value" id="pronunciationScore">78%</span>
                    </div>
                </div>
                <div class="feedback-text" id="feedbackText">
                    Good job! Your pitch pattern was mostly correct. Try to emphasize the high-low pattern more clearly.
                </div>
                <div class="pitch-comparison" id="pitchComparison">
                    <div class="comparison-item">
                        <span class="label">Target:</span>
                        <div class="pitch-bars">
                            <div class="pitch-bar high">H</div>
                            <div class="pitch-bar low">L</div>
                        </div>
                    </div>
                    <div class="comparison-item">
                        <span class="label">Your:</span>
                        <div class="pitch-bars">
                            <div class="pitch-bar medium">M</div>
                            <div class="pitch-bar low">L</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="navigation">
                <button id="prevBtn" class="nav-btn prev-btn" disabled>Previous</button>
                <button id="nextBtn" class="nav-btn next-btn">Next Lesson</button>
                <button id="submitBtn" class="nav-btn submit-btn" style="display: none;">Complete Training</button>
            </div>
        </main>

        <!-- Results Modal -->
        <div class="modal" id="resultsModal" style="display: none;">
            <div class="modal-content">
                <h2>üéå Training Complete!</h2>
                <div class="final-scores">
                    <div class="final-score">
                        <span class="score-label">Overall Pitch Accuracy:</span>
                        <span class="score-value" id="overallScore">82%</span>
                    </div>
                    <div class="final-score">
                        <span class="score-label">Level:</span>
                        <span class="score-value" id="levelScore">Intermediate</span>
                    </div>
                </div>
                <div class="recommendations" id="recommendations">
                    <h3>Á∂ôÁ∂ö„ÅÆ„Åü„ÇÅ„ÅÆ„Ç¢„Éâ„Éê„Ç§„Çπ (Continued Learning Tips)</h3>
                    <ul>
                        <li>Practice pitch patterns daily with native speaker recordings</li>
                        <li>Focus on the high-low contrast in „ÅØ„Åó (bridge vs chopsticks)</li>
                        <li>Work on distinguishing „ÅÇ„ÇÅ (rain vs candy) by pitch alone</li>
                        <li>Practice the long vowel difference in „Å≥„Çá„ÅÜ„ÅÑ„Çì vs „Å≥„Çà„ÅÜ„ÅÑ„Çì</li>
                    </ul>
                </div>
                <button id="restartBtn" class="restart-btn">Start Over</button>
            </div>
        </div>
    </div>

    <script src="japanese-script.js"></script>
</body>
</html>
